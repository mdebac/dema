
<ng-container
        *ngrxLet="{ menuSide:menuSide$, header:header$,isLoggedOut: authStore.isLoggedOut$, isLoggedIn: authStore.isLoggedIn$, selectedIso: selectedIso$, role: role$, user:user$} as vm">

    <div class="grid-container">

        <div class="flex-container">


                <div class="iconSpace">

                    <img width="200" *ngIf="vm.header?.iconImage" (click)="toHome()"
                         src="{{'data:image/jpg;base64,' + vm.header?.iconImage}}" alt=""/>
                    <p>{{ getIconText(vm.selectedIso, vm.header?.iso) }}</p>

                </div>

                <div class="rightSpace">
                    <div class="contentSpace">
                        <div class="headerText">
                            <div class="logoText">
                                {{ getIconTitle(vm.selectedIso, vm.header?.iso) }}
                                <div class="grb">
                                    <div class="grb-crveno"></div>
                                    <div class="grb-bijelo"></div>
                                    <div class="grb-bijelo"></div>
                                    <div class="grb-crveno"></div>
                                </div>
                            </div>
                            <div class="descriptionText">
                                {{ getDescriptionText(vm.selectedIso, vm.header?.iso) }}
                            </div>
                        </div>
                        <div class="isoSpaceLanguage">
                            <iso-buttons *ngIf="vm.header?.languages" [countries]="vm.header?.languages"
                                         [selectedIn]="vm.selectedIso"
                                         (selectedOut)="activeIso($event)">
                            </iso-buttons>
                            @if (vm.isLoggedIn) {
                                <user-buttons [user]="vm.user">
                                </user-buttons>
                            }
                            @if (vm.isLoggedOut) {
                                <div class="button-container">
                                    <button routerLink="/login"
                                            routerLinkActive="activebutton"
                                            mat-fab extended>
                                        <mat-icon>favorite</mat-icon>
                                        Login
                                    </button>
                                </div>
                                <div class="button-container">
                                    <button routerLink="/register"
                                            routerLinkActive="activebutton"
                                            mat-fab extended>
                                        <mat-icon>favorite</mat-icon>
                                        Register
                                    </button>
                                </div>
                            }
                        </div>
                    </div>

                    <div class="buttonSpace">

                        <div class="tabButtons">
                            @if (vm.header?.id && (vm.role.includes(Roles.ADMIN.toUpperCase()) || vm.role.includes(Roles.MANAGER.toUpperCase()))){
                                <button mat-icon-button (click)="createMenuDetail(vm.header)">
                                    <mat-icon>add</mat-icon>
                                </button>
                            }

                            @for (headerDetail of vm.header?.menus; track headerDetail.menuUrl) {
                                @for (iso of headerDetail.iso; track iso.iso) {
                                    @if (vm.selectedIso === iso.iso) {
                                        <div>
                                            <button
                                                    routerLink="{{ headerDetail.menuUrl }}"
                                                    routerLinkActive="activebutton"
                                                    mat-fab extended>
                                                <mat-icon *ngIf="headerDetail.icon"> {{ headerDetail.icon }}
                                                </mat-icon>
                                                {{ iso.title}}
                                            </button>
                                        </div>
                                    }
                                }
                            }
                        </div>
                        <div class="dashboardButtons">

                        </div>
                    </div>
                </div>


        </div>

            <router-outlet [routerOutletData]="vm.selectedIso"></router-outlet>

    </div>
</ng-container>
