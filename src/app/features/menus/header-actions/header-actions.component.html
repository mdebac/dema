<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-notdog fa-solid fa-t fa-xl text"></i>
            <div class="naslov">Title and Description</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header" [formGroup]="form">
        <div formArrayName="iso">
            @for (iso of isoArray.controls; track iso; let i = $index) {
<!--                @if (isIsoSelected(iso)) {-->
                    <mat-expansion-panel class="custom-panel-flags" (opened)="isOpened = !isOpened"
                                         (closed)="isOpened = !isOpened">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                <div [ngClass]="flag(iso.value.iso)"></div>
                                <div class="text isoText">{{ getIsoByKey(iso.value.iso) }}</div>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="actionButtons-header">
                            <div [formGroupName]="i">
                                <div class="text-text">Title</div>
                                <quill-editor class="myEditor"
                                              format="html"
                                              [modules]="quillConfiguration"
                                              [placeholder]="''"
                                              formControlName="title"
                                ></quill-editor>
                                <mat-divider></mat-divider>
                                <div class="text-text">Description</div>
                                <quill-editor class="myEditor"
                                              format="html"
                                              [modules]="quillConfiguration"
                                              [placeholder]="''"
                                              formControlName="description"
                                ></quill-editor>
                            </div>
                        </div>
                    </mat-expansion-panel>
<!--                }-->

            }
        </div>

        <button class="mybutton" [disabled]="!form.valid" (click)="onUpdateIso()" mat-fab extended>
            Update
        </button>

    </div>
</mat-expansion-panel>


<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-solid fa-palette fa-xl text"></i>
            <div class="naslov">Colors</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header" [formGroup]="form">
        <mat-label>Primary Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="primaryColor" [value]="primaryColor"><br>

        <mat-label>Secondary Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="secondaryColor" [value]="secondaryColor"><br>

        <mat-label>Danger Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="dangerColor" [value]="dangerColor"><br>

        <mat-label>Warn Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="warnColor" [value]="warnColor"><br>

        <mat-label>Info Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="infoColor" [value]="infoColor"><br>

        <mat-label>Accept Color</mat-label>
        <input type="color" (change)="changeColor()" formControlName="acceptColor" [value]="acceptColor">
    </div>
</mat-expansion-panel>

<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-solid fa-f fa-xl text"></i>
            <div class="naslov">Fonts</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header">

        @for (font_types of font_families.keys(); track $index) {

            <mat-expansion-panel class="custom-panel-flags" (opened)="isOpened = !isOpened"
                                 (closed)="isOpened = !isOpened">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <div class="naslov">{{ font_types }}</div>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="actionButtons-header">
                    @for (font_family of font_families.get(font_types); track $index) {
                        <p class="checkbox-item">
                            <mat-checkbox [style.color]="primaryColor" [checked]="getChecked(font_family)"
                                          [value]="font_family" (change)="onChange($event)">
                                <div [style.font-family]="font_family"
                                     [style.color]="primaryColor"
                                     [style.transform]="'scale(1.3)'">
                                    {{ font_family }}
                                </div>
                            </mat-checkbox>
                        </p>
                    }

                </div>
            </mat-expansion-panel>
        }

        <button class="mybutton" [disabled]="!form.valid" (click)="reload()" mat-fab extended>
            Update
        </button>
    </div>
</mat-expansion-panel>

<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-regular fa-image fa-xl text"></i>
            <div class="naslov">Logo image</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header" [formGroup]="form">
        <input #logoImageInput
               (change)="selectLogo($event)"
               class="form-control"
               type="file"
               accept="image/*"
        >
        <mat-error></mat-error>

        @if (Object.hasOwn(cFile, 'ext')) {

            <image-cropper
                    [imageQuality]="cropQuality"
                    [imageFile]="cFile.file"
                    format="png"
                    [onlyScaleDown]="true"
                    [resizeToWidth]="300"
                    [maintainAspectRatio]="false"
                    (imageCropped)="imageCropped($event)"
            >
            </image-cropper>
        }

        @if (!Object.hasOwn(cFile, 'ext') && showPicture) {
            <img width="100%" src="{{showPicture}}" alt=""/>
            <mat-checkbox (change)="onRemovePicture($event)">
                {{ "remove.image" | translate }}
            </mat-checkbox>
        }
        @if (Object.hasOwn(cFile, 'ext')) {
            <mat-checkbox (change)="onRemovePicture($event)">
                {{ "remove.image" | translate }}
            </mat-checkbox>
        }

        {{ toBigImage }}
    </div>
</mat-expansion-panel>


<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-solid fa-image fa-xl text"></i>
            <div class="naslov">Background image</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header text" [formGroup]="form">
        <input #backgroundImageInput
               (change)="selectBackgroundImage($event)"
               class="form-control"
               type="file"
               accept="image/*"
        >
        <mat-error></mat-error>

        @if (Object.hasOwn(bgFile, 'ext')) {

            <image-cropper
                    [imageQuality]="cropQuality"
                    [imageFile]="bgFile.file"
                    format="png"
                    [onlyScaleDown]="true"
                    [resizeToWidth]="300"
                    [maintainAspectRatio]="false"
                    (imageCropped)="croppedBackgroundImage($event)"
            >
            </image-cropper>
        }

        @if (!Object.hasOwn(bgFile, 'ext') && showBackgroundImage) {
            <img width="100%" src="{{showBackgroundImage}}" alt=""/>
            <mat-checkbox (change)="onRemoveBackgroundPicture($event)">
                {{ "remove.image" | translate }}
            </mat-checkbox>
        }
        @if (Object.hasOwn(bgFile, 'ext')) {
            <mat-checkbox (change)="onRemoveBackgroundPicture($event)">
                {{ "remove.image" | translate }}
            </mat-checkbox>
        }
        {{ toBigBackgroundImage }}
    </div>
</mat-expansion-panel>

<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-solid fa-circle-half-stroke fa-xl text"></i>
            <div class="naslov">Gradient Background</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header" [formGroup]="form">

        {{ rate }}
        <mat-slider class="my-slider" min="0" max="100" step="1" showTickMarks discrete [displayWith]="formatLabel">
            <input matSliderThumb value="{{rate}}" (valueChange)="changeSlider($event)">
        </mat-slider>
    </div>
</mat-expansion-panel>

<mat-expansion-panel class="custom-panel-header" (opened)="isOpened = !isOpened" (closed)="isOpened = !isOpened">

    <mat-expansion-panel-header>
        <mat-panel-title>
            <i class="fa-solid fa-earth-americas fa-xl text"></i>
            <div class="naslov">Languages</div>
        </mat-panel-title>
    </mat-expansion-panel-header>
    <div class="actionButtons-header">
        <choose-iso [chosenLanguages]="header?.main?.languages"
                    (selectedIso)="onSelectedIso($event)">
        </choose-iso>
    </div>
</mat-expansion-panel>
